#include "macros/btlcmd.inc"

    .data

_000:
    CompareMonDataToValue OPCODE_EQU, BTLVAR_MSG_BATTLER_TEMP, BATTLEMON_CUR_HP, 0, _031
    PlayBattleAnimation BTLVAR_MSG_BATTLER_TEMP, BATTLE_ANIMATION_HELD_ITEM
    Wait 
    CompareMonDataToValue OPCODE_EQU, BTLVAR_MSG_BATTLER_TEMP, BATTLEMON_HELD_ITEM, ITEM_RED_CARD, _029
    // TODO: Eject Button text
    RemoveItem BTLVAR_MSG_BATTLER_TEMP
    UpdateVar OPCODE_FLAG_ON, BTLVAR_BATTLE_CTX_STATUS, SYSCTL_HIT_DURING_SHADOW_FORCE
    Call BATTLE_SUBSCRIPT_ATTACK_THEN_SWITCH_OUT
    UpdateVar OPCODE_FLAG_OFF, BTLVAR_BATTLE_CTX_STATUS, SYSCTL_HIT_DURING_SHADOW_FORCE
    GoTo _031

_029:
    // TODO: Red Card Text
    Call BATTLE_SUBSCRIPT_FORCE_TARGET_TO_SWITCH_OR_FLEE

_031:
    End 