#include "macros/btlcmd.inc"

    .data

_000:
    UpdateVar OPCODE_FLAG_ON, BTLVAR_BATTLE_CTX_STATUS, SYSCTL_PLAYED_MOVE_ANIMATION|SYSCTL_SKIP_ATTACK_MESSAGE
    UpdateVar OPCODE_FLAG_ON, BTLVAR_BATTLE_CTX_STATUS_2, SYSCTL_STAT_STAGE_CHANGE_SHOWN
    CompareVarToValue OPCODE_EQU, BTLVAR_CALC_TEMP, 0x00000008, _022
    UpdateVarFromVar OPCODE_SET, BTLVAR_SIDE_EFFECT_PARAM, BTLVAR_CALC_TEMP
    UpdateVar OPCODE_ADD, BTLVAR_SIDE_EFFECT_PARAM, MOVE_SUBSCRIPT_PTR_ATTACK_UP_2_STAGES
    Call BATTLE_SUBSCRIPT_UPDATE_STAT_STAGE

_022:
    CompareVarToValue OPCODE_EQU, BTLVAR_MSG_ABILITY_TEMP, ABILITY_SAND_VEIL, _037
    UpdateVarFromVar OPCODE_SET, BTLVAR_SIDE_EFFECT_PARAM, BTLVAR_MSG_ABILITY_TEMP
    UpdateVar OPCODE_ADD, BTLVAR_SIDE_EFFECT_PARAM, MOVE_SUBSCRIPT_PTR_ATTACK_DOWN_1_STAGE
    Call BATTLE_SUBSCRIPT_UPDATE_STAT_STAGE

_037:
    UpdateVar OPCODE_FLAG_OFF, BTLVAR_BATTLE_CTX_STATUS_2, SYSCTL_UPDATE_STAT_STAGES
    UpdateVar OPCODE_FLAG_OFF, BTLVAR_BATTLE_CTX_STATUS_2, SYSCTL_STAT_STAGE_CHANGE_SHOWN
    End 