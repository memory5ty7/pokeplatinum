#include "macros/btlcmd.inc"

    .data

_000:
    GoTo _attack

_attack:
    UpdateMonDataFromVar OPCODE_GET, BTLSCR_ATTACKER, BATTLEMON_ATTACK_STAGE, BTLVAR_CALC_TEMP
    UpdateVar OPCODE_SUB_TO_ZERO, BTLVAR_CALC_TEMP, 6
    UpdateVar OPCODE_MUL, BTLVAR_CALC_TEMP, 20
    UpdateVarFromVar OPCODE_ADD, BTLVAR_MOVE_POWER, BTLVAR_CALC_TEMP
    GoTo _defense

_defense:
    UpdateMonDataFromVar OPCODE_GET, BTLSCR_ATTACKER, BATTLEMON_DEFENSE_STAGE, BTLVAR_CALC_TEMP
    UpdateVar OPCODE_SUB_TO_ZERO, BTLVAR_CALC_TEMP, 6
    UpdateVar OPCODE_MUL, BTLVAR_CALC_TEMP, 20
    UpdateVarFromVar OPCODE_ADD, BTLVAR_MOVE_POWER, BTLVAR_CALC_TEMP
    GoTo _sp_attack

_sp_attack:
    UpdateMonDataFromVar OPCODE_GET, BTLSCR_ATTACKER, BATTLEMON_SP_ATTACK_STAGE, BTLVAR_CALC_TEMP
    UpdateVar OPCODE_SUB_TO_ZERO, BTLVAR_CALC_TEMP, 6
    UpdateVar OPCODE_MUL, BTLVAR_CALC_TEMP, 20
    UpdateVarFromVar OPCODE_ADD, BTLVAR_MOVE_POWER, BTLVAR_CALC_TEMP
    GoTo _sp_defense

_sp_defense:
    UpdateMonDataFromVar OPCODE_GET, BTLSCR_ATTACKER, BATTLEMON_SP_DEFENSE_STAGE, BTLVAR_CALC_TEMP
    UpdateVar OPCODE_SUB_TO_ZERO, BTLVAR_CALC_TEMP, 6
    UpdateVar OPCODE_MUL, BTLVAR_CALC_TEMP, 20
    UpdateVarFromVar OPCODE_ADD, BTLVAR_MOVE_POWER, BTLVAR_CALC_TEMP
    GoTo _speed

_speed:
    UpdateMonDataFromVar OPCODE_GET, BTLSCR_ATTACKER, BATTLEMON_SPEED_STAGE, BTLVAR_CALC_TEMP
    UpdateVar OPCODE_SUB_TO_ZERO, BTLVAR_CALC_TEMP, 6
    UpdateVar OPCODE_MUL, BTLVAR_CALC_TEMP, 20
    UpdateVarFromVar OPCODE_ADD, BTLVAR_MOVE_POWER, BTLVAR_CALC_TEMP
    GoTo _accuracy

_accuracy:
    UpdateMonDataFromVar OPCODE_GET, BTLSCR_ATTACKER, BATTLEMON_ACCURACY_STAGE, BTLVAR_CALC_TEMP
    UpdateVar OPCODE_SUB_TO_ZERO, BTLVAR_CALC_TEMP, 6
    UpdateVar OPCODE_MUL, BTLVAR_CALC_TEMP, 20
    UpdateVarFromVar OPCODE_ADD, BTLVAR_MOVE_POWER, BTLVAR_CALC_TEMP
    GoTo _evasion

_evasion:
    UpdateMonDataFromVar OPCODE_GET, BTLSCR_ATTACKER, BATTLEMON_EVASION_STAGE, BTLVAR_CALC_TEMP
    UpdateVar OPCODE_SUB_TO_ZERO, BTLVAR_CALC_TEMP, 6
    UpdateVar OPCODE_MUL, BTLVAR_CALC_TEMP, 20
    UpdateVarFromVar OPCODE_ADD, BTLVAR_MOVE_POWER, BTLVAR_CALC_TEMP
    GoTo _end

_end:
    CalcCrit 
    CalcDamage
    End 
